<!-- Model Card Partial - Used in history grid -->
<div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover" 
     data-status="{{ model.status }}"
     {% if model.status == 'processing' %}
     hx-get="/api/models/{{ model.id }}/status"
     hx-trigger="every 5s"
     hx-swap="outerHTML"
     {% endif %}>
    <!-- Thumbnail -->
    <div class="relative h-48 bg-gradient-to-br from-purple-400 to-blue-500">
        {% if model.thumbnail_url %}
            <img src="{{ model.thumbnail_url }}" alt="{{ model.prompt }}" class="w-full h-full object-cover">
        {% else %}
            <div class="absolute inset-0 flex items-center justify-center text-white">
                <svg class="w-16 h-16 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"></path>
                </svg>
            </div>
        {% endif %}
        
        <!-- Status Badge -->
        <div class="absolute top-3 right-3">
            {% if model.status == 'completed' %}
                <span class="bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold">✓ Completed</span>
            {% elif model.status == 'processing' %}
                <span class="bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-bold">⏳ Processing</span>
            {% elif model.status == 'failed' %}
                <span class="bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold">✗ Failed</span>
            {% else %}
                <span class="bg-gray-500 text-white px-3 py-1 rounded-full text-xs font-bold">{{ model.status }}</span>
            {% endif %}
        </div>
    </div>
    
    <!-- Content -->
    <div class="p-5">
        <h3 class="font-bold text-lg mb-2 line-clamp-2">{{ model.prompt|truncatewords:15 }}</h3>
        <p class="text-sm text-gray-500 mb-4">{{ model.created_at|date:"M d, Y H:i" }}</p>
        
        <!-- Actions -->
        <div class="flex space-x-2">
            {% if model.status == 'completed' %}
                <a href="/viewer/{{ model.id }}" class="flex-1 bg-purple-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-purple-700 transition text-center text-sm">
                    View 3D
                </a>
                <a href="{{ model.glb_url }}" download class="bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 transition text-center text-sm">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                    </svg>
                </a>
            {% elif model.status == 'processing' %}
                <button 
                    hx-get="/api/models/{{ model.id }}/status" 
                    hx-target="closest div[data-status]" 
                    hx-swap="outerHTML"
                    hx-trigger="refresh"
                    class="flex-1 bg-blue-100 text-blue-700 px-4 py-2 rounded-lg font-semibold text-sm cursor-wait"
                >
                    Generating...
                </button>
            {% elif model.status == 'failed' %}
                <a href="/generate?prompt={{ model.prompt|urlencode }}" class="flex-1 bg-orange-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-orange-700 transition text-center text-sm">
                    Retry
                </a>
            {% endif %}
        </div>
    </div>
</div>
